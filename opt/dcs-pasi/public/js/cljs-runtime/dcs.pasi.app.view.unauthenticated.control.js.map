{"version":3,"sources":["dcs/pasi/app/view/unauthenticated/control.cljs"],"mappings":"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","names":["js/Error","dcs.pasi.app.view.unauthenticated.control/toggle","current-value-of-atom","value","cljs.spec.alpha.valid_QMARK_","cljs.core/set?","js/console.log","cljs.core/contains?","cljs.core.disj","cljs.core.conj","dcs.pasi.app.view.unauthenticated.control/checkbox","backing-atom","label","cljs.core.swap_BANG_","cljs.core/deref","dcs.pasi.app.view.unauthenticated.control/radio","cljs.core/reset!","cljs.core._EQ_","dcs.pasi.app.view.unauthenticated.control/ele","wr-ds","selected-years","selected-orgs","selected-streams","selected-groupby","selected-charttype","years","cljs.core.map","p1__52017#","cljs.core.subs","cljs.core/int","cljs.core.distinct","cljs.core.sort","organisations","waste-streams","cljs.core.doall","p1__52018#","dcs.pasi.app.state/unauthn-selected-years-cursor","p1__52019#","dcs.pasi.app.state/unauthn-selected-orgs-cursor","p1__52020#","dcs.pasi.app.state/unauthn-selected-streams-cursor","dcs.pasi.app.state/unauthn-selected-groupby-cursor","dcs.pasi.app.state/unauthn-selected-charttype-cursor","dcs.pasi.app.view.unauthenticated.control/root","dcs.pasi.app.state/unauthn-wr-ds-cursor"],"sourcesContent":["(ns dcs.pasi.app.view.unauthenticated.control\n  (:require [cljs.spec.alpha :as s]\n            [reagent.core :as r]\n            [dcs.pasi.app.state :as state]))\n\n;; Bulma/CSS add-ons:\n;;   https://justboil.github.io/bulma-checkbox/\n;;   https://bulma-collapsible.netlify.app/usage/\n\n\n(defn toggle [current-value-of-atom value]\n  {:pre [(s/valid? set? current-value-of-atom)]}\n  (js/console.log \"current-value-of-atom =\" (str current-value-of-atom))\n  (js/console.log \"value =\" (str value))\n  (if (contains? current-value-of-atom value)\n    (disj current-value-of-atom value)\n    (conj current-value-of-atom value)))\n\n\n(defn checkbox [backing-atom value label]\n [:div {:key value}\n  [:label.b-checkbox.checkbox.is-small\n   [:input {:type      \"checkbox\"\n            :on-change #(swap! backing-atom toggle value)\n            :checked   (contains? @backing-atom value)}]\n   [:span.check.is-info]\n   [:span.control-label label]]])\n\n(defn radio [backing-atom value label]\n  [:div {:key value}\n   [:label.b-checkbox.checkbox.is-small\n    [:input {:type      \"checkbox\"\n             :on-change #(reset! backing-atom value)\n             :checked   (= @backing-atom value)}]\n    [:span.check.is-info]\n    [:span.control-label label]]])\n\n\n(defn ele [wr-ds selected-years selected-orgs selected-streams selected-groupby selected-charttype]\n  (let [years (->> wr-ds\n                   (map :from) \n                   (map #(subs % 0 4))\n                   (map int)\n                   distinct\n                   sort)\n        organisations (->> wr-ds\n                           (map :enabler) \n                           distinct \n                           sort)\n        waste-streams (->> wr-ds\n                           (map :wasteStream) \n                           distinct \n                           sort)] \n    \n    [:div.columns \n     \n     [:div.column.is-1\n      [:div.container\n       [:h3.subtitle.mb-1 \"Years\"]\n       (doall (map #(checkbox state/unauthn-selected-years-cursor % (str %)) years))\n       ]]\n     \n     [:div.column.is-2\n      [:div.container\n       [:h3.subtitle.mb-1 \"Organisations\"]\n       (doall (map #(checkbox state/unauthn-selected-orgs-cursor % (str %)) organisations))]]\n     \n     [:div.column.is-3\n      [:div.container\n       [:h3.subtitle.mb-1 \"Waste streams\"]\n       (doall (map #(checkbox state/unauthn-selected-streams-cursor % (str %)) waste-streams))]]\n     \n     [:div.column.is-2\n      [:div.container\n       [:h3.subtitle.mb-1 \"Group by\"]\n       (radio state/unauthn-selected-groupby-cursor \"Waste stream\" \"Waste stream\")\n       (radio state/unauthn-selected-groupby-cursor \"Organisation\" \"Organisation\")\n       [:br]\n       [:h3.subtitle.mb-1 \"Chart type\"]\n       (radio state/unauthn-selected-charttype-cursor \"Bar chart\" \"Bar chart\")\n       (radio state/unauthn-selected-charttype-cursor \"Line chart\" \"Line chart\")]]\n     \n     [:div.column.is-4\n      [:div.container\n       [:h3.subtitle \"TODO controls\"]\n       [:div.content \n        [:ul \n         [:li \"in terms of tonnes vs cars vs airplanes\"]\n         [:li \"use parent->child grid rows for drill-in\"]\n         [:li \"date range slider\"]\n         [:li \"controls for 'process' and other dims\"]\n         [:li \"use the same colour swatch throughout\"]\n         [:li \"download current selection as CSV\"]\n         [:li \"generate SPARQL query for current selection\"]\n         [:li \"handle comments (comments attach to?)\"]\n         [:li \"handle 'presets' (in comments?)\"]]]]]\n     ]))\n\n\n(defn root []\n  [ele\n   @state/unauthn-wr-ds-cursor\n   @state/unauthn-selected-years-cursor\n   @state/unauthn-selected-orgs-cursor\n   @state/unauthn-selected-streams-cursor\n   @state/unauthn-selected-groupby-cursor\n   @state/unauthn-selected-charttype-cursor])"]}