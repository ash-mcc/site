{"version":3,"sources":["dcs/pasi/app/view/unauthenticated/map.cljs"],"mappings":";AASA,AAAKA,mDAAW,gDAAA,hDAACC;AACjB,AAAKC,8DAAsB,gDAAA,hDAACD;AAG5B,kDAAA,lDAAME;AAAN,AACE,IAAAC,aAA+C,AAACI;oBAAhD,AAAAH,4CAAAD,WAAA,IAAA,3EAAOE;+BAAP,AAAAD,4CAAAD,WAAA,IAAA,tFAAqBG;AAArB,AACE,AAACE,sBAAOT,iDAAWM;;AACnB,AAACG,sBAAOP,4DAAsBK;;AAC9B,IAAAG,qBAAA,AAAAC,gBAAeE;AAAf,AAAA,oBAAAH;AAAA,AAAA,SAAAA,LAAWE;AAAX,AACE,OAACE,YAAeR,cAAcC,yBAAyB,AAACQ,qBAAQ,AAACC,sEAAiCJ;;AADpG;;;AAGJ,mDAAA,nDAAMK,8GAAYC,MAAMC;AAAxB,AACE,IAAAT,qBAAA,AAAAC,gBAAeE;AAAf,AAAA,oBAAAH;AAAA,AAAA,SAAAA,LAAWE;AAAX,AACE,mBAAA,AAAAD,kEAAA,AAAAA,9EAACG,4BAAgBd,kEAAYE,6DAAsB,AAACa,qBAAQ,AAACC,sEAAiCJ;;AADhG;;;AAGF,+CAAA,/CAAMQ;AAAN,AAAA,0FAAA,8EAAA,2CAAA,uDAAA,2CAAA,yDAAA,sBAAA,mFAAA;;AAIA,kDAAA,lDAAMC;AAAN,AACE,+DAAA,2CAAA,sHAAA,oIAAA,7VAACC,4KAAsCF,iIACAjB,sIACAc;;AAEzC,6CAAA,7CAAMM;AAAN,AAAA,0IAAA,2CAAA,qDAAA,AAAAZ,hJACGU,gKAAkBR","names":["dcs.pasi.app.view.unauthenticated.map/map-holder","reagent.core.atom","dcs.pasi.app.view.unauthenticated.map/markerclusters-holder","dcs.pasi.app.view.unauthenticated.map/did-mount","vec__60899","cljs.core.nth","map-component","markerclusters-component","js/initMap","cljs.core/reset!","temp__5753__auto__","cljs.core/deref","ds","dcs.pasi.app.state/unauthn-wr-ds-cursor","js/initMarkers","cljs.core/clj->js","dcs.pasi.app.view.unauthenticated.tmp/->geojson-as-a-clj-structure","dcs.pasi.app.view.unauthenticated.map/did-update","_this","_prev-props","dcs.pasi.app.view.unauthenticated.map/render","dcs.pasi.app.view.unauthenticated.map/component","reagent.core.create_class","dcs.pasi.app.view.unauthenticated.map/root"],"sourcesContent":["(ns dcs.pasi.app.view.unauthenticated.map\n  (:require [cljs.spec.alpha :as s]\n            [clojure.string :as str]\n            [reagent.core :as r]\n            [dcs.pasi.app.util :as util]\n            [dcs.pasi.app.state :as state]\n            [dcs.pasi.app.view.unauthenticated.tmp :as tmp]))\n\n\n(def map-holder (r/atom nil))\n(def markerclusters-holder (r/atom nil))\n\n\n(defn did-mount []\n  (let [[map-component markerclusters-component] (js/initMap)]\n    (reset! map-holder map-component)\n    (reset! markerclusters-holder markerclusters-component)\n    (when-let [ds @state/unauthn-wr-ds-cursor]\n      (js/initMarkers map-component markerclusters-component (clj->js (tmp/->geojson-as-a-clj-structure ds))))))\n\n(defn did-update [_this _prev-props]\n  (when-let [ds @state/unauthn-wr-ds-cursor]\n    (js/initMarkers @map-holder @markerclusters-holder (clj->js (tmp/->geojson-as-a-clj-structure ds)))))\n\n(defn render []\n  [:div#map-container {:style {:height 350}}\n   [:div#map]])\n\n(defn component []\n  (r/create-class {:reagent-render       render\n                   :component-did-mount  did-mount\n                   :component-did-update did-update}))\n\n(defn root []\n  [component {:data @state/unauthn-wr-ds-cursor}])\n"]}