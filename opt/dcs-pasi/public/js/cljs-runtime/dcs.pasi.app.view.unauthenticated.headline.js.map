{"version":3,"sources":["dcs/pasi/app/view/unauthenticated/headline.cljs"],"mappings":";AAKA,uDAAA,vDAAMA,sHAAWC;AAAjB,AACE,kEAAA,KAAA,hEAACC,wHAAuBD;;AAE1B,iDAAA,jDAAME,0GAAKC,MAAMC,eAAeC,cAAcC;AAA9C,AACE,IAAMC,KAAG,AAACC,gDAAcL,MAAMC,eAAeC,cAAcC;IACrDG,eAAc,qDAAA,gBAAKF,hBACAG,rDACAX;IACnBY,QAAc,gBAAA,iDAEK,4CAAA,WAAAE,vDAACD,jDACDG,hBACAL;AAFA,AAAM,oDAAAG,iBAAA,IAAA,lEAACC;oGAFPP,jGACA,4CAAA,5CAACK;IAIpBI,QAAc,qDAAA,CAGK,AAAA,WAAAG,jEAEApB;AAFA,AAAE,QAAAoB,mBAAA;sMAHP,RAAKZ,5HACA,4CAAA,5CAACK,/DACD,AAACK,8CAAMC;IAI1BE,OAAc,qDAAA,CAIK,AAAA,WAAAE,jEAEAvB;AAFA,AAAE,QAAAuB,mBAAA;GADF,AAAA,WAAAD;AAAA,AAAE,QAAAA,mBAAA;uMAHP,TAAKd,5HACA,4CAAA,5CAACK,/DACD,AAACK,8CAAMC;IAK1BK,UAAiB,qDAAA,CAIK,AAAA,WAAAE,jEAEA1B;AAFA,AAAE,QAAA0B,mBAAA;GADF,AAAA,WAAAD;AAAA,AAAE,QAAAA,mBAAA;uMAHP,TAAKjB,5HACA,4CAAA,5CAACK,/DACD,AAACK,8CAAMC;IAK7BQ,gBAAc,qDAAA,gBAAA,wJAAKnB,vGACA,4CAAA,5CAACK,jDACDG,hBACAL,rDACAX;eAjCzB,XAkCM4B;AAlCN,AAAA,0FAAA,gEAAA,mFAAA,6GAAA,mFAAA,mDAAA,mFAAA,8DAAA,mFAAA,qDAAA,8BAAA,mFAAA,wDAAA,MAAA,mFAAA,oDAAA,YAAA,4BAAA,mFAAA,0FAAA,mFAAA,6GAAA,mFAAA,mDAAA,mFAAA,8DAAA,mFAAA,qDAAA,kCAAA,mFAAA,wDAAA,sCAAA,mFAAA,4FAAA,mFAAA,6GAAA,mFAAA,mDAAA,mFAAA,8DAAA,0CAAA,mFAAA,iGAAA,mFAAA,6GAAA,mFAAA,mDAAA,mFAAA,8DAAA,sCAAA,mFAAA,0FAAA,mFAAA,6GAAA,mFAAA,mDAAA,mFAAA,8DAAA,2CAAA,mFAAA,kGAAA,mFAAA,6GAAA,mFAAA,mDAAA,mFAAA,8DAAA,gCAAA,mFAAA,/lHAuCeX,+9BAIAO,grBAIAd,irBAIAE,+qBAIAe,4qBAIAC;;AAGjB,kDAAA,lDAAME;AAAN,AAAA,yIAAA,AAAAD,yDAAA,AAAAA,kEAAA,AAAAA,iEAAA,AAAAA,3OACG1B,+DACC4B,yDACAC,kEACAC,iEACAC","names":["dcs.pasi.app.view.unauthenticated.headline/int-comma","n","cljs.pprint.cl_format","dcs.pasi.app.view.unauthenticated.headline/ele","wr-ds","selected-years","selected-orgs","selected-streams","ds","dcs.pasi.app.view.unauthenticated.tmp/filter-ds","observations","cljs.core/count","years","cljs.core.map","p1__60890#","cljs.core.subs","cljs.core.distinct","co2eT","cljs.core.apply","cljs.core/+","p1__60894#","cars","p1__60895#","p1__60896#","flights","p1__60897#","p1__60898#","organisations","comments","cljs.core/deref","dcs.pasi.app.view.unauthenticated.headline/root","dcs.pasi.app.state/unauthn-wr-ds-cursor","dcs.pasi.app.state/unauthn-selected-years-cursor","dcs.pasi.app.state/unauthn-selected-orgs-cursor","dcs.pasi.app.state/unauthn-selected-streams-cursor"],"sourcesContent":["(ns dcs.pasi.app.view.unauthenticated.headline\n  (:require [cljs.pprint :as pp]\n            [dcs.pasi.app.state :as state]\n            [dcs.pasi.app.view.unauthenticated.tmp :as tmp]))\n\n(defn int-comma [n] \n  (pp/cl-format nil \"~:d\" n))\n\n(defn ele [wr-ds selected-years selected-orgs selected-streams]\n  (let [ds (tmp/filter-ds wr-ds selected-years selected-orgs selected-streams)\n        observations  (->> ds\n                           count\n                           int-comma)\n        years         (->> ds\n                           (map :from) \n                           (map #(subs % 0 4))\n                           distinct\n                           count)\n        co2eT         (->> ds\n                           (map :carbonSavingCo2eKg) \n                           (apply +)\n                           (#(/ % 1000))\n                           int\n                           int-comma)\n        cars          (->> ds\n                           (map :carbonSavingCo2eKg)\n                           (apply +)\n                           (#(/ % 1000))\n                           (#(/ % 4.1))\n                           int\n                           int-comma)\n        flights          (->> ds \n                              (map :carbonSavingCo2eKg)\n                              (apply +)\n                              (#(/ % 1000))\n                              (#(/ % 0.2025))\n                              int\n                              int-comma)\n        organisations (->> ds\n                           (map :enabler) \n                           distinct \n                           count\n                           int-comma)\n        comments      0]\n    [:nav.level\n     [:div.level-item.has-text-centered\n      [:div\n       [:p.heading  [:span \"\u267b\ufe0f Carbon savings\" [:br] \"(CO\" [:sub \"2\"] \"e tonnes)\"]]\n       [:p.title co2eT]]]\n     [:div.level-item.has-text-centered\n      [:div\n       [:p.heading [:span \"\u2708\ufe0f Equivalent flights\" [:br] \"(Glasgow -> Berlin)\"]]\n       [:p.title flights]]]\n     [:div.level-item.has-text-centered\n      [:div\n       [:p.heading \"\ud83d\udc41\ufe0f Observations\"]\n       [:p.title observations]]]\n     [:div.level-item.has-text-centered\n      [:div\n       [:p.heading \"\ud83d\udcc5 Period covered\"]\n       [:p.title years]]]\n     [:div.level-item.has-text-centered\n      [:div\n       [:p.heading \"\ud83d\udee0\ufe0f Organisations\"]\n       [:p.title organisations]]]\n     [:div.level-item.has-text-centered\n      [:div\n       [:p.heading \"\ud83d\udcdd Comments\"]\n       [:p.title comments]]]]))\n\n\n(defn root []\n  [ele\n   @state/unauthn-wr-ds-cursor\n   @state/unauthn-selected-years-cursor\n   @state/unauthn-selected-orgs-cursor\n   @state/unauthn-selected-streams-cursor])"]}